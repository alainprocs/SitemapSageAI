<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEO Analysis Results - Topical Cluster Analyzer</title>
    <!-- Bootstrap CSS (Replit Theme) -->
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="py-4 bg-dark">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="mb-2">SEO Topical Cluster Analysis</h1>
                    <p class="lead text-secondary mb-0">Results for: <span class="text-info">{{ sitemap_url }}</span></p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="{{ url_for('index') }}" class="btn btn-outline-light">
                        <i class="fas fa-arrow-left me-2"></i>Analyze Another Sitemap
                    </a>
                </div>
            </div>
        </div>
    </header>

    <main class="container py-4">
        <!-- Site Stats Section -->
        <section class="mb-5">
            <h2 class="mb-4"><i class="fas fa-chart-bar text-info me-2"></i>Sitemap Statistics</h2>
            <div class="row g-4">
                <div class="col-md-3">
                    <div class="card bg-dark stat-card">
                        <div class="stat-value">{{ sitemap_stats.total_urls }}</div>
                        <div class="stat-label">Total URLs</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark stat-card">
                        <div class="stat-value">{{ "%.1f"|format(sitemap_stats.avg_depth) }}</div>
                        <div class="stat-label">Average Depth</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark stat-card">
                        <div class="stat-value">{{ clusters.clusters|length }}</div>
                        <div class="stat-label">Topical Clusters</div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark stat-card">
                        <div class="stat-value">{{ sitemap_stats.main_domain }}</div>
                        <div class="stat-label">Domain</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Visualization Section -->
        <section class="mb-5">
            <h2 class="mb-4"><i class="fas fa-chart-pie text-info me-2"></i>Cluster Visualization</h2>
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="card bg-dark">
                        <div class="card-body">
                            <h5 class="card-title">Topical Distribution</h5>
                            <div class="chart-container">
                                <canvas id="clusters-chart"></canvas>
                            </div>
                            <!-- Hidden chart data for JavaScript -->
                            <script id="chart-data" type="application/json">{{ clusters|tojson }}</script>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="card bg-dark">
                        <div class="card-body">
                            <h5 class="card-title">URL Depth Distribution</h5>
                            <div class="chart-container">
                                <canvas id="depth-chart"></canvas>
                            </div>
                            <!-- Hidden depth data for JavaScript -->
                            <script id="depth-data" type="application/json">{{ sitemap_stats.depth_distribution|tojson }}</script>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Top Clusters Section -->
        <section class="mb-5">
            <h2 class="mb-4"><i class="fas fa-sitemap text-info me-2"></i>Top 5 SEO Topical Clusters</h2>
            
            <div class="row g-4">
                {% for cluster in clusters.clusters %}
                <div class="col-lg-6">
                    <div class="card bg-dark cluster-card">
                        <div class="card-body">
                            <h3 class="cluster-title">{{ cluster.title }}</h3>
                            <div class="badge bg-info mb-3">{{ cluster.count }} URLs</div>
                            
                            <p>{{ cluster.description }}</p>
                            
                            <h5 class="mt-4">SEO Significance:</h5>
                            <p>{{ cluster.seo_significance }}</p>
                            
                            <h5 class="mt-4">Example URLs:</h5>
                            <div class="list-group mb-3">
                                {% for example in cluster.examples %}
                                <div class="example-url mb-2">
                                    <span>{{ example }}</span>
                                    <button class="btn btn-sm btn-outline-secondary copy-btn" data-copy="{{ example }}">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                                {% endfor %}
                            </div>
                            
                            <h5 class="mt-4"><i class="fas fa-lightbulb text-warning me-2"></i>Recommended Blog Article Ideas:</h5>
                            <div class="article-ideas mt-3">
                                {% if cluster.article_ideas %}
                                    <div class="accordion" id="articleIdeas{{ loop.index }}">
                                        {% for idea in cluster.article_ideas %}
                                            <div class="accordion-item bg-dark">
                                                <h2 class="accordion-header">
                                                    <button class="accordion-button collapsed bg-dark text-white" type="button" data-bs-toggle="collapse" data-bs-target="#idea{{ loop.parent.loop.index }}_{{ loop.index }}" aria-expanded="false">
                                                        <i class="fas fa-pen-fancy text-info me-2"></i>{{ idea.headline }}
                                                    </button>
                                                </h2>
                                                <div id="idea{{ loop.parent.loop.index }}_{{ loop.index }}" class="accordion-collapse collapse" data-bs-parent="#articleIdeas{{ loop.parent.loop.index }}">
                                                    <div class="accordion-body">
                                                        <p>{{ idea.description }}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    </div>
                                {% else %}
                                    <p>No article ideas available for this cluster.</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>

        <!-- Blog Content Strategy Section -->
        <section class="mb-5">
            <h2 class="mb-4"><i class="fas fa-pen-fancy text-info me-2"></i>Blog Content Strategy</h2>
            <div class="card bg-dark">
                <div class="card-body">
                    <div class="alert alert-warning">
                        <h5><i class="fas fa-lightbulb me-2"></i>Content Opportunity Alert</h5>
                        <p class="mb-0">We've analyzed your sitemap and generated tailored blog article ideas for each topical cluster. These suggestions are designed to fill content gaps and strengthen your topic authority. Expand each cluster above to view article recommendations.</p>
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5 class="text-info">Content Strategy Benefits</h5>
                            <ul>
                                <li>Fill content gaps in your existing clusters</li>
                                <li>Build more comprehensive topic coverage</li>
                                <li>Target relevant long-tail keywords</li>
                                <li>Increase internal linking opportunities</li>
                                <li>Establish stronger topical authority</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-info">Implementation Tips</h5>
                            <ul>
                                <li>Prioritize clusters with highest traffic potential</li>
                                <li>Create content calendars based on recommendations</li>
                                <li>Develop comprehensive outlines for each article idea</li>
                                <li>Include proper internal links to other cluster content</li>
                                <li>Measure performance to refine your content strategy</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Recommendations Section -->
        <section class="mb-5">
            <h2 class="mb-4"><i class="fas fa-lightbulb text-warning me-2"></i>SEO Recommendations</h2>
            <div class="card bg-dark">
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5 class="text-info">Strengthen Your Clusters</h5>
                            <ul>
                                <li>Create pillar content for each topical cluster</li>
                                <li>Improve internal linking between related topics</li>
                                <li>Ensure each cluster has a clear hierarchy</li>
                                <li>Add breadcrumbs to enhance navigation</li>
                                <li>Use consistent URL structures within clusters</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5 class="text-info">Optimize Your Content</h5>
                            <ul>
                                <li>Update top-performing pages with fresh content</li>
                                <li>Address content gaps in weak clusters</li>
                                <li>Use semantic keywords throughout related content</li>
                                <li>Improve meta descriptions for key pages</li>
                                <li>Consider consolidating similar content pieces</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <p class="mb-0">SEO Topical Cluster Analyzer using OpenAI</p>
            <p class="small text-secondary mt-1">Analyze your website structure for better SEO performance</p>
        </div>
    </footer>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
